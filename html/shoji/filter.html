<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.8.4" />
<title>shoji.filter API documentation</title>
<meta name="description" content="Using filters …" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.18.1/highlight.min.js" integrity="sha256-eOgo0OtLL4cdq7RdwRUiGKLX9XsIJ7nGhWEKbohmVAQ=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>shoji.filter</code></h1>
</header>
<section id="section-intro">
<h2 id="using-filters">Using filters</h2>
<p>Filters are expressions used to select tensor rows, columns, etc., for reading or writing to the database.
Filters can be applied to a workspace, dimension or tensor using the slicing expression <code>[]</code>.</p>
<h3 id="applying-filters-to-tensors">Applying filters to tensors</h3>
<p>Filtering on a tensor selects a subtensor by filtering along each dimension, returning a <code>numpy.ndarray</code>:</p>
<pre><code class="python">vals = ws.scRNA.Age[ws.scRNA.Tissue == &quot;Cortex&quot;]
# Returns those rows of Age where Tissue equals &quot;Cortex&quot;
</code></pre>
<p>Filters applied to a tensor must match tensor dimensions. For example, if a tensor is defined
on ("cells", "genes"), then the first filter expression must run along the "cells" dimension
and the second filter expression along the "genes" dimension. If a filter expression is not
given for a dimension, then all indices along that dimension are included in the result. If you
want to omit dimensions in the middle, use ellipsis:</p>
<pre><code class="python">vals = ws.images.ImageStack[10:20, ..., 90:100]
# Returns indices 10 to 20 along dimension 1, all indices along dimension 2, and 90:100 along dimension 3.
</code></pre>
<h3 id="writing-through-a-filter-view">Writing through a filter (view)</h3>
<p>Assigning values (which must be a <code>numpy.ndarray</code> of the right shape and <code>dtype</code>) to a
filtered tensor causes the corresponding tensor elements in the database to be updated:</p>
<pre><code class="python">vals = np.array(...)  # A numpy array of the right shape and dtype
ws.scRNA.Age[ws.scRNA.Tissue == &quot;Cortex&quot;] = vals
# Those rows of Age where Tissue equals &quot;Cortex&quot; are updated
</code></pre>
<p>Assigning values in this way is an atomic operation (it will either succeed or fail
completely), and is subject to the <a href="file:///Users/stelin/shoji/html/shoji/index.html#limitations">size and time limits</a> of shoji transactions.</p>
<h3 id="applying-filters-to-dimensions">Applying filters to dimensions</h3>
<p>Filtering on a dimension selects rows of that dimension and returns a <code><a title="shoji.view.View" href="view.html#shoji.view.View">View</a></code>.
You can then read tensors from the view, or assign values to tensors through the view:</p>
<pre><code class="python">view = ws.scRNA.cells[:10]
# A view that includes the first ten rows along the 'cells' dimension
t = view.Tissue # Returns a numpy.ndarray of the first ten values of the Tissue tensor 
a = view.Age  # Returns a numpy.ndarray of the first ten values of the Age tensor
view.Age = vals  # assign a np.ndarray of suitable shape and dtype
</code></pre>
<p>Assigning values in this way is an atomic operation (it will either succeed or fail
completely), and is subject to the <a href="file:///Users/stelin/shoji/html/shoji/index.html#limitations">size and time limits</a> of shoji transactions.</p>
<h3 id="applying-filters-to-workspaces">Applying filters to workspaces</h3>
<p>Recall that workspaces may contain multiple dimensions. When filtering on a workspace,
the dimension that the filter applies to is inferred from the expression. For example,
if the filter expression is <code>ws.Age &gt; 10</code> and <code>Age</code> is a tensor with <code>dims=("cells",)</code>,
then the filter expression applies along the <code>cells</code> dimension.</p>
<p>Filtering on a workspace selects rows of the inferred dimension and returns a <code><a title="shoji.view.View" href="view.html#shoji.view.View">View</a></code>.
You can then read tensors from the view, or assign values to tensors through the view as above.</p>
<p>However, when filtering on workspaces, you can also simultaneously filter on multiple dimensions,
by providing two or more filter expressions separated by comma:</p>
<pre><code class="python">ws = db.scRNA
ws.cells = shoji.Dimension(shape=None)
ws.genes = shoji.Dimension(shape=31768)
ws.Age = shoji.Tensor(&quot;string&quot;, (&quot;cells&quot;,))
ws.Chromosome = shoji.Tensor(&quot;string&quot;, (&quot;genes&quot;,))
# Slice both dimensions:
view = ws.scRNA[ws.Age &gt; 10, ws.Chromosome == &quot;chr1&quot;]
</code></pre>
<p>Creating views on workspaces like this is a powerful way to focus on a defined subset of the dataset.</p>
<p>To work with views, see the <code><a title="shoji.view" href="view.html">shoji.view</a></code> API reference.</p>
<h2 id="kinds-of-filters">Kinds of filters</h2>
<h3 id="comparisons">Comparisons</h3>
<p>You can compare a tensor to a constant:</p>
<pre><code class="python">ws = db.cancer_project
view = ws[ws.Age &gt; 12]  # Create a view of the workspace including only samples where Age &gt; 12
</code></pre>
<p>Or compare a two tensors:</p>
<pre><code class="python">ws = db.cancer_project
view = ws[ws.Age == ws.OriginalAge]  # Create a view of the workspace including only samples where Age == OriginalAge
</code></pre>
<p>Comparison operators <code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>. <code>&lt;=</code> are supported.</p>
<h3 id="slices">Slices</h3>
<p>You can use Python slices on dimensions and tensors (but not on workspaces):</p>
<pre><code class="python">ws = db.cancer_project
view = ws.samples[3:10]  # Create a view along the 'samples' dimension including only rows 3 - 9 (zero-based)
</code></pre>
<h3 id="index-arrays">Index arrays</h3>
<p>You can use lists, tuples or np.ndarrays of integers to select rows on dimensions and tensors (but not on workspaces):</p>
<pre><code class="python">ws = db.cancer_project
view = ws.samples[(0, 1, 2, 3, 10, 20, 21)]
</code></pre>
<h3 id="boolean-arrays">Boolean arrays</h3>
<p>You can use lists, tuples or np.ndarrays of bools to select rows on dimensions and tensors (but not on workspaces):</p>
<pre><code class="python">ws = db.cancer_project
view = ws.samples[(True, False, False, True, False)]
</code></pre>
<h3 id="compound-filters">Compound filters</h3>
<p>You can combine filters using <code>&amp;</code> (and), <code>|</code> (or), <code>~</code> (not), <code>^</code> (xor), and <code>-</code> (set difference). </p>
<p><strong>Note:</strong> The individual filter expressions must be surrounded by parentheses:</p>
<pre><code class="python">ws = db.cancer_project
view = ws[(ws.Age &gt; 12) &amp; (ws.SampleID &lt; 10)]
</code></pre>
<p>The set difference operator <code>-</code> returns all rows selected by the left-hand expression except
those selected by the right-hand expression.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;

## Using filters

Filters are expressions used to select tensor rows, columns, etc., for reading or writing to the database.
Filters can be applied to a workspace, dimension or tensor using the slicing expression `[]`.

### Applying filters to tensors

Filtering on a tensor selects a subtensor by filtering along each dimension, returning a `numpy.ndarray`:

```python
vals = ws.scRNA.Age[ws.scRNA.Tissue == &#34;Cortex&#34;]
# Returns those rows of Age where Tissue equals &#34;Cortex&#34;
```

Filters applied to a tensor must match tensor dimensions. For example, if a tensor is defined
on (&#34;cells&#34;, &#34;genes&#34;), then the first filter expression must run along the &#34;cells&#34; dimension
and the second filter expression along the &#34;genes&#34; dimension. If a filter expression is not
given for a dimension, then all indices along that dimension are included in the result. If you 
want to omit dimensions in the middle, use ellipsis:

```python
vals = ws.images.ImageStack[10:20, ..., 90:100]
# Returns indices 10 to 20 along dimension 1, all indices along dimension 2, and 90:100 along dimension 3.
```

### Writing through a filter (view)

Assigning values (which must be a `numpy.ndarray` of the right shape and `dtype`) to a 
filtered tensor causes the corresponding tensor elements in the database to be updated:

```python
vals = np.array(...)  # A numpy array of the right shape and dtype
ws.scRNA.Age[ws.scRNA.Tissue == &#34;Cortex&#34;] = vals
# Those rows of Age where Tissue equals &#34;Cortex&#34; are updated
```

Assigning values in this way is an atomic operation (it will either succeed or fail
completely), and is subject to the [size and time limits](file:///Users/stelin/shoji/html/shoji/index.html#limitations) of shoji transactions.

### Applying filters to dimensions

Filtering on a dimension selects rows of that dimension and returns a `shoji.view.View`.
You can then read tensors from the view, or assign values to tensors through the view:

```python
view = ws.scRNA.cells[:10]
# A view that includes the first ten rows along the &#39;cells&#39; dimension
t = view.Tissue # Returns a numpy.ndarray of the first ten values of the Tissue tensor 
a = view.Age  # Returns a numpy.ndarray of the first ten values of the Age tensor
view.Age = vals  # assign a np.ndarray of suitable shape and dtype
```

Assigning values in this way is an atomic operation (it will either succeed or fail
completely), and is subject to the [size and time limits](file:///Users/stelin/shoji/html/shoji/index.html#limitations) of shoji transactions.


### Applying filters to workspaces

Recall that workspaces may contain multiple dimensions. When filtering on a workspace,
the dimension that the filter applies to is inferred from the expression. For example,
if the filter expression is `ws.Age &gt; 10` and `Age` is a tensor with `dims=(&#34;cells&#34;,)`,
then the filter expression applies along the `cells` dimension.

Filtering on a workspace selects rows of the inferred dimension and returns a `shoji.view.View`.
You can then read tensors from the view, or assign values to tensors through the view as above.

However, when filtering on workspaces, you can also simultaneously filter on multiple dimensions,
by providing two or more filter expressions separated by comma:

```python
ws = db.scRNA
ws.cells = shoji.Dimension(shape=None)
ws.genes = shoji.Dimension(shape=31768)
ws.Age = shoji.Tensor(&#34;string&#34;, (&#34;cells&#34;,))
ws.Chromosome = shoji.Tensor(&#34;string&#34;, (&#34;genes&#34;,))
# Slice both dimensions:
view = ws.scRNA[ws.Age &gt; 10, ws.Chromosome == &#34;chr1&#34;]
```

Creating views on workspaces like this is a powerful way to focus on a defined subset of the dataset.

To work with views, see the `shoji.view` API reference.


## Kinds of filters

### Comparisons

You can compare a tensor to a constant:

```python
ws = db.cancer_project
view = ws[ws.Age &gt; 12]  # Create a view of the workspace including only samples where Age &gt; 12
```

Or compare a two tensors:

```python
ws = db.cancer_project
view = ws[ws.Age == ws.OriginalAge]  # Create a view of the workspace including only samples where Age == OriginalAge
```

Comparison operators `==`, `!=`, `&gt;`, `&gt;=`, `&lt;`. `&lt;=` are supported.


### Slices

You can use Python slices on dimensions and tensors (but not on workspaces):

```python
ws = db.cancer_project
view = ws.samples[3:10]  # Create a view along the &#39;samples&#39; dimension including only rows 3 - 9 (zero-based)
```


### Index arrays

You can use lists, tuples or np.ndarrays of integers to select rows on dimensions and tensors (but not on workspaces):

```python
ws = db.cancer_project
view = ws.samples[(0, 1, 2, 3, 10, 20, 21)]
```


### Boolean arrays

You can use lists, tuples or np.ndarrays of bools to select rows on dimensions and tensors (but not on workspaces):

```python
ws = db.cancer_project
view = ws.samples[(True, False, False, True, False)]
```


### Compound filters

You can combine filters using `&amp;` (and), `|` (or), `~` (not), `^` (xor), and `-` (set difference). 

**Note:** The individual filter expressions must be surrounded by parentheses:

```python
ws = db.cancer_project
view = ws[(ws.Age &gt; 12) &amp; (ws.SampleID &lt; 10)]
```

The set difference operator `-` returns all rows selected by the left-hand expression except
those selected by the right-hand expression.

&#34;&#34;&#34;
from typing import Union, Optional
import numpy as np
import shoji


class Filter:
        def __init__(self) -&gt; None:
                self.dim: Union[str, int, None]

        def _combine(self, operator: str, this: Union[&#34;Filter&#34;, &#34;shoji.View&#34;], other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                def fixup(arg):
                        if isinstance(arg, Filter):
                                return arg
                        elif isinstance(this, shoji.View):
                                if len(this.filters) == 1:
                                        for f in this.filters.values():
                                                return f
                                else:
                                        raise ValueError(&#34;Cannot use logical expression on compound view&#34;)

                a = fixup(this)
                b = fixup(other)
                return shoji.CompoundFilter(operator, a, b)

        def __and__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;&amp;&#34;, self, other)

        def __rand__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;&amp;&#34;, other, self)

        def __or__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;|&#34;, self, other)

        def __ror__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;|&#34;, other, self)

        def __sub__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;-&#34;, self, other)

        def __rsub__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;-&#34;, other, self)

        def __xor__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;^&#34;, self, other)

        def __rxor__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;^&#34;, other, self)

        def __invert__(self) -&gt; &#34;Filter&#34;:
                return shoji.CompoundFilter(&#34;~&#34;, self, None)

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                pass

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                pass


class CompoundFilter(Filter):
        &#34;&#34;&#34;Filter that compares two filters&#34;&#34;&#34;
        def __init__(self, operator: str, left_operand: Filter, right_operand: Optional[Filter]) -&gt; None:
                self.operator = operator
                if operator not in (&#34;~&#34;, &#34;&amp;&#34;, &#34;|&#34;, &#34;-&#34;, &#34;^&#34;):
                        raise SyntaxError(f&#34;Invalid operator {operator}&#34;)
                self.left_operand = left_operand
                self.right_operand = right_operand
                if left_operand.dim is not None:
                        self.dim = left_operand.dim
                        if (right_operand is not None) and (right_operand.dim is not None) and left_operand.dim != right_operand.dim:
                                raise SyntaxError(&#34;All tensors in an expression must have same first dimensions&#34;)
                else:
                        self.dim = right_operand.dim if right_operand is not None else None

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.left_operand.get_all_rows(wsm))

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                if self.operator == &#34;&amp;&#34;:
                        assert isinstance(self.left_operand, Filter)
                        assert isinstance(self.right_operand, Filter)
                        return np.intersect1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

                if self.operator == &#34;|&#34;:
                        assert isinstance(self.left_operand, Filter)
                        assert isinstance(self.right_operand, Filter)
                        return np.union1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

                if self.operator == &#34;-&#34;:
                        assert isinstance(self.left_operand, Filter)
                        assert isinstance(self.right_operand, Filter)
                        return np.setdiff1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

                if self.operator == &#34;^&#34;:
                        assert isinstance(self.left_operand, Filter)
                        assert isinstance(self.right_operand, Filter)
                        return np.setxor1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

                if self.operator == &#34;~&#34;:
                        assert isinstance(self.left_operand, Filter)
                        return np.setdiff1d(self.left_operand.get_all_rows(wsm), self.left_operand.get_rows(wsm))

        def __repr__(self) -&gt; str:
                if self.operator == &#34;~&#34;:
                        return f&#34;~{self.left_operand}&#34;
                else:
                        return f&#34;({self.left_operand} {self.operator} {self.right_operand})&#34;


class TensorFilter(Filter):
        &#34;&#34;&#34;Filter that compares two tensors&#34;&#34;&#34;
        def __init__(self, operator: str, left_operand: shoji.Tensor, right_operand: shoji.Tensor) -&gt; None:
                self.operator = operator
                if operator not in (&#34;&gt;&#34;, &#34;&lt;&#34;, &#34;&gt;=&#34;, &#34;&lt;=&#34;, &#34;==&#34;, &#34;!=&#34;):
                        raise SyntaxError(f&#34;Invalid operator {operator}&#34;)
                self.left_operand = left_operand
                if left_operand.rank != 1:
                        raise SyntaxError(f&#34;Only rank-1 tensors can be used in filters&#34;)
                self.right_operand = right_operand
                if right_operand.rank != 1:
                        raise SyntaxError(f&#34;Only rank-1 tensors can be used in filters&#34;)
                if isinstance(left_operand.dims[0], str):
                        self.dim = left_operand.dims[0]
                        if isinstance(right_operand.dims[0], str) and left_operand.dims[0] != right_operand.dims[0]:
                                raise SyntaxError(&#34;All tensors in an expression must have same first dimensions&#34;)
                elif isinstance(right_operand.dims[0], str):
                        self.dim = right_operand.dims[0]
                else:
                        self.dim = None
                if left_operand.shape[0] != right_operand.shape[0]:
                        raise SyntaxError(f&#34;Tensor first dimensions mismatch&#34;)

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.left_operand.shape[0])  # TODO: maybe read this from db instead, to avoid stale state

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                if self.operator == &#34;&gt;&#34;:
                        # Do the range lookups on the tensor indexes
                        raise NotImplementedError(&#34;Tensor-tensor comparisons not yet supported&#34;)
                # etc

        def __repr__(self) -&gt; str:
                return f&#34;({self.left_operand} {self.operator} {self.right_operand})&#34;

class ConstFilter(Filter): 
        &#34;&#34;&#34;Filter that compares a tensor to a constant&#34;&#34;&#34;
        def __init__(self, operator: str, left_operand: shoji.Tensor, right_operand: Union[str, int, float, bool]) -&gt; None:
                self.operator = operator
                if operator not in (&#34;&gt;&#34;, &#34;&lt;&#34;, &#34;&gt;=&#34;, &#34;&lt;=&#34;, &#34;==&#34;, &#34;!=&#34;):
                        raise SyntaxError(f&#34;Invalid operator {operator}&#34;)
                self.left_operand = left_operand
                if left_operand.rank != 1:
                        raise SyntaxError(f&#34;Only rank-1 tensors can be used in filters&#34;)
                self.dim = left_operand.dims[0]
                if not isinstance(self.dim, str):
                        # TODO: relax this limitation by reading the whole tensor and filtering on the values (maybe?)
                        raise SyntaxError(f&#34;Only tensors with named first dimension can be used in filters&#34;)
                self.right_operand = right_operand
                if type(right_operand) not in (str, int, float, bool):
                        raise SyntaxError(f&#34;Only str, int, float and bool can be used as constants in filters&#34;)

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.left_operand.shape[0])

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return shoji.io.const_compare(wsm._db.transaction, wsm, self.left_operand.name, self.operator, self.right_operand)

        def __repr__(self) -&gt; str:
                return f&#34;({self.left_operand} {self.operator} {self.right_operand})&#34;


class DimensionSliceFilter(Filter):
        def __init__(self, dim: shoji.Dimension, slice_: slice) -&gt; None:
                self.dim = dim.name
                self.dimension = dim
                self.slice_ = slice_

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.dimension.length)

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                s = self.slice_.indices(self.dimension.length)
                return np.arange(s[0], s[1], s[2])

        def __repr__(self) -&gt; str:
                s = self.slice_.indices(self.dimension.length)
                return f&#34;({self.dim}[{s[0]}:{s[1]}:{s[2]}])&#34;


class DimensionIndicesFilter(Filter):
        def __init__(self, dim: shoji.Dimension, indices: np.ndarray) -&gt; None:
                self.dim = dim.name
                self.dimension = dim
                self.indices = indices

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.dimension.length)

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                self.indices[self.indices &lt; 0] = self.indices[self.indices &lt; 0] + self.dimension.length
                if not np.all(self.indices &lt; self.dimension.length):
                        raise IndexError(&#34;Index out of range&#34;)
                return self.indices[self.indices &lt; self.dimension.length]

        def __repr__(self) -&gt; str:
                return f&#34;({self.dim}[{self.indices}])&#34;


class DimensionBoolFilter(Filter):
        def __init__(self, dim: shoji.Dimension, selected: np.ndarray) -&gt; None:
                self.dim = dim.name
                self.dimension = dim
                self.selected = selected

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.dimension.length)

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                if self.selected.shape[0] != self.dimension.length:
                        raise IndexError(f&#34;Boolean array used for fancy indexing along &#39;{self.dim}&#39; has {self.selected.shape[0]} elements but dimension length is {self.dimension.length}&#34;)
                return np.where(self.selected)[0]

        def __repr__(self) -&gt; str:
                return f&#34;({self.dim}[{self.selected}])&#34;


class TensorSliceFilter(Filter):
        def __init__(self, tensor: shoji.Tensor, slice_: slice, axis: int) -&gt; None:
                self.dim = tensor.dims[axis] if tensor.rank &gt; 0 else None
                self.tensor = tensor
                self.slice_ = slice_
                self.axis = axis

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                raise NotImplementedError()

        def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
                if n_rows is None:
                        n_rows = self.tensor.shape[self.axis]
                s = self.slice_.indices(n_rows)
                return np.arange(s[0], s[1], s[2])

        def __repr__(self) -&gt; str:
                s = self.slice_.indices(self.tensor.shape[self.axis])
                return f&#34;({self.tensor.name}[{s[0]}:{s[1]}:{s[2]}])&#34;


class TensorIndicesFilter(Filter):
        def __init__(self, tensor: shoji.Tensor, indices: np.ndarray, axis: int) -&gt; None:
                self.axis = axis
                self.dim = tensor.dims[axis] if tensor.rank &gt; 0 else None
                self.tensor = tensor
                self.indices = indices

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                raise NotImplementedError()

        def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
                if n_rows is None:
                        n_rows = self.tensor.shape[self.axis]
                self.indices[self.indices &lt; 0] = self.indices[self.indices &lt; 0] + self.tensor.shape[self.axis]
                if not np.all(self.indices &lt; n_rows):
                        raise IndexError(&#34;Index out of range&#34;)
                return self.indices[self.indices &lt; n_rows]

        def __repr__(self) -&gt; str:
                return f&#34;({self.tensor.name}[{self.indices}])&#34;


class TensorBoolFilter(Filter):
        def __init__(self, tensor: shoji.Tensor, selected: np.ndarray, axis: int) -&gt; None:
                self.axis = axis
                self.dim = tensor.dims[axis] if tensor.rank &gt; 0 else None
                self.tensor = tensor
                self.selected = selected

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                raise NotImplementedError()

        def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
                if n_rows is None:
                        n_rows = self.tensor.shape[self.axis]

                if self.selected.shape[0] != n_rows:
                        raise IndexError(f&#34;Boolean array used for fancy indexing along axis {self.axis} of &#39;{self.tensor.name}&#39; has {self.selected.shape[0]} elements but tensor length is {n_rows}&#34;)
                return np.where(self.selected)[0]

        def __repr__(self) -&gt; str:
                return f&#34;({self.tensor.name}[{self.selected}])&#34;</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="shoji.filter.CompoundFilter"><code class="flex name class">
<span>class <span class="ident">CompoundFilter</span></span>
<span>(</span><span>operator: str, left_operand: <a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a>, right_operand: Union[<a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a>, NoneType])</span>
</code></dt>
<dd>
<div class="desc"><p>Filter that compares two filters</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class CompoundFilter(Filter):
        &#34;&#34;&#34;Filter that compares two filters&#34;&#34;&#34;
        def __init__(self, operator: str, left_operand: Filter, right_operand: Optional[Filter]) -&gt; None:
                self.operator = operator
                if operator not in (&#34;~&#34;, &#34;&amp;&#34;, &#34;|&#34;, &#34;-&#34;, &#34;^&#34;):
                        raise SyntaxError(f&#34;Invalid operator {operator}&#34;)
                self.left_operand = left_operand
                self.right_operand = right_operand
                if left_operand.dim is not None:
                        self.dim = left_operand.dim
                        if (right_operand is not None) and (right_operand.dim is not None) and left_operand.dim != right_operand.dim:
                                raise SyntaxError(&#34;All tensors in an expression must have same first dimensions&#34;)
                else:
                        self.dim = right_operand.dim if right_operand is not None else None

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.left_operand.get_all_rows(wsm))

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                if self.operator == &#34;&amp;&#34;:
                        assert isinstance(self.left_operand, Filter)
                        assert isinstance(self.right_operand, Filter)
                        return np.intersect1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

                if self.operator == &#34;|&#34;:
                        assert isinstance(self.left_operand, Filter)
                        assert isinstance(self.right_operand, Filter)
                        return np.union1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

                if self.operator == &#34;-&#34;:
                        assert isinstance(self.left_operand, Filter)
                        assert isinstance(self.right_operand, Filter)
                        return np.setdiff1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

                if self.operator == &#34;^&#34;:
                        assert isinstance(self.left_operand, Filter)
                        assert isinstance(self.right_operand, Filter)
                        return np.setxor1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

                if self.operator == &#34;~&#34;:
                        assert isinstance(self.left_operand, Filter)
                        return np.setdiff1d(self.left_operand.get_all_rows(wsm), self.left_operand.get_rows(wsm))

        def __repr__(self) -&gt; str:
                if self.operator == &#34;~&#34;:
                        return f&#34;~{self.left_operand}&#34;
                else:
                        return f&#34;({self.left_operand} {self.operator} {self.right_operand})&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.CompoundFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        return np.arange(self.left_operand.get_all_rows(wsm))</code></pre>
</details>
</dd>
<dt id="shoji.filter.CompoundFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        if self.operator == &#34;&amp;&#34;:
                assert isinstance(self.left_operand, Filter)
                assert isinstance(self.right_operand, Filter)
                return np.intersect1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

        if self.operator == &#34;|&#34;:
                assert isinstance(self.left_operand, Filter)
                assert isinstance(self.right_operand, Filter)
                return np.union1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

        if self.operator == &#34;-&#34;:
                assert isinstance(self.left_operand, Filter)
                assert isinstance(self.right_operand, Filter)
                return np.setdiff1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

        if self.operator == &#34;^&#34;:
                assert isinstance(self.left_operand, Filter)
                assert isinstance(self.right_operand, Filter)
                return np.setxor1d(self.left_operand.get_rows(wsm), self.right_operand.get_rows(wsm))

        if self.operator == &#34;~&#34;:
                assert isinstance(self.left_operand, Filter)
                return np.setdiff1d(self.left_operand.get_all_rows(wsm), self.left_operand.get_rows(wsm))</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.ConstFilter"><code class="flex name class">
<span>class <span class="ident">ConstFilter</span></span>
<span>(</span><span>operator: str, left_operand: <a title="shoji.tensor.Tensor" href="tensor.html#shoji.tensor.Tensor">Tensor</a>, right_operand: Union[str, int, float, bool])</span>
</code></dt>
<dd>
<div class="desc"><p>Filter that compares a tensor to a constant</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConstFilter(Filter): 
        &#34;&#34;&#34;Filter that compares a tensor to a constant&#34;&#34;&#34;
        def __init__(self, operator: str, left_operand: shoji.Tensor, right_operand: Union[str, int, float, bool]) -&gt; None:
                self.operator = operator
                if operator not in (&#34;&gt;&#34;, &#34;&lt;&#34;, &#34;&gt;=&#34;, &#34;&lt;=&#34;, &#34;==&#34;, &#34;!=&#34;):
                        raise SyntaxError(f&#34;Invalid operator {operator}&#34;)
                self.left_operand = left_operand
                if left_operand.rank != 1:
                        raise SyntaxError(f&#34;Only rank-1 tensors can be used in filters&#34;)
                self.dim = left_operand.dims[0]
                if not isinstance(self.dim, str):
                        # TODO: relax this limitation by reading the whole tensor and filtering on the values (maybe?)
                        raise SyntaxError(f&#34;Only tensors with named first dimension can be used in filters&#34;)
                self.right_operand = right_operand
                if type(right_operand) not in (str, int, float, bool):
                        raise SyntaxError(f&#34;Only str, int, float and bool can be used as constants in filters&#34;)

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.left_operand.shape[0])

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return shoji.io.const_compare(wsm._db.transaction, wsm, self.left_operand.name, self.operator, self.right_operand)

        def __repr__(self) -&gt; str:
                return f&#34;({self.left_operand} {self.operator} {self.right_operand})&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.ConstFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        return np.arange(self.left_operand.shape[0])</code></pre>
</details>
</dd>
<dt id="shoji.filter.ConstFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        return shoji.io.const_compare(wsm._db.transaction, wsm, self.left_operand.name, self.operator, self.right_operand)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.DimensionBoolFilter"><code class="flex name class">
<span>class <span class="ident">DimensionBoolFilter</span></span>
<span>(</span><span>dim: <a title="shoji.dimension.Dimension" href="dimension.html#shoji.dimension.Dimension">Dimension</a>, selected: numpy.ndarray)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DimensionBoolFilter(Filter):
        def __init__(self, dim: shoji.Dimension, selected: np.ndarray) -&gt; None:
                self.dim = dim.name
                self.dimension = dim
                self.selected = selected

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.dimension.length)

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                if self.selected.shape[0] != self.dimension.length:
                        raise IndexError(f&#34;Boolean array used for fancy indexing along &#39;{self.dim}&#39; has {self.selected.shape[0]} elements but dimension length is {self.dimension.length}&#34;)
                return np.where(self.selected)[0]

        def __repr__(self) -&gt; str:
                return f&#34;({self.dim}[{self.selected}])&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.DimensionBoolFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        return np.arange(self.dimension.length)</code></pre>
</details>
</dd>
<dt id="shoji.filter.DimensionBoolFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        if self.selected.shape[0] != self.dimension.length:
                raise IndexError(f&#34;Boolean array used for fancy indexing along &#39;{self.dim}&#39; has {self.selected.shape[0]} elements but dimension length is {self.dimension.length}&#34;)
        return np.where(self.selected)[0]</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.DimensionIndicesFilter"><code class="flex name class">
<span>class <span class="ident">DimensionIndicesFilter</span></span>
<span>(</span><span>dim: <a title="shoji.dimension.Dimension" href="dimension.html#shoji.dimension.Dimension">Dimension</a>, indices: numpy.ndarray)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DimensionIndicesFilter(Filter):
        def __init__(self, dim: shoji.Dimension, indices: np.ndarray) -&gt; None:
                self.dim = dim.name
                self.dimension = dim
                self.indices = indices

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.dimension.length)

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                self.indices[self.indices &lt; 0] = self.indices[self.indices &lt; 0] + self.dimension.length
                if not np.all(self.indices &lt; self.dimension.length):
                        raise IndexError(&#34;Index out of range&#34;)
                return self.indices[self.indices &lt; self.dimension.length]

        def __repr__(self) -&gt; str:
                return f&#34;({self.dim}[{self.indices}])&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.DimensionIndicesFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        return np.arange(self.dimension.length)</code></pre>
</details>
</dd>
<dt id="shoji.filter.DimensionIndicesFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        self.indices[self.indices &lt; 0] = self.indices[self.indices &lt; 0] + self.dimension.length
        if not np.all(self.indices &lt; self.dimension.length):
                raise IndexError(&#34;Index out of range&#34;)
        return self.indices[self.indices &lt; self.dimension.length]</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.DimensionSliceFilter"><code class="flex name class">
<span>class <span class="ident">DimensionSliceFilter</span></span>
<span>(</span><span>dim: <a title="shoji.dimension.Dimension" href="dimension.html#shoji.dimension.Dimension">Dimension</a>, slice_: slice)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DimensionSliceFilter(Filter):
        def __init__(self, dim: shoji.Dimension, slice_: slice) -&gt; None:
                self.dim = dim.name
                self.dimension = dim
                self.slice_ = slice_

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.dimension.length)

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                s = self.slice_.indices(self.dimension.length)
                return np.arange(s[0], s[1], s[2])

        def __repr__(self) -&gt; str:
                s = self.slice_.indices(self.dimension.length)
                return f&#34;({self.dim}[{s[0]}:{s[1]}:{s[2]}])&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.DimensionSliceFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        return np.arange(self.dimension.length)</code></pre>
</details>
</dd>
<dt id="shoji.filter.DimensionSliceFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        s = self.slice_.indices(self.dimension.length)
        return np.arange(s[0], s[1], s[2])</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.Filter"><code class="flex name class">
<span>class <span class="ident">Filter</span></span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class Filter:
        def __init__(self) -&gt; None:
                self.dim: Union[str, int, None]

        def _combine(self, operator: str, this: Union[&#34;Filter&#34;, &#34;shoji.View&#34;], other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                def fixup(arg):
                        if isinstance(arg, Filter):
                                return arg
                        elif isinstance(this, shoji.View):
                                if len(this.filters) == 1:
                                        for f in this.filters.values():
                                                return f
                                else:
                                        raise ValueError(&#34;Cannot use logical expression on compound view&#34;)

                a = fixup(this)
                b = fixup(other)
                return shoji.CompoundFilter(operator, a, b)

        def __and__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;&amp;&#34;, self, other)

        def __rand__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;&amp;&#34;, other, self)

        def __or__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;|&#34;, self, other)

        def __ror__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;|&#34;, other, self)

        def __sub__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;-&#34;, self, other)

        def __rsub__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;-&#34;, other, self)

        def __xor__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;^&#34;, self, other)

        def __rxor__(self, other: Union[&#34;Filter&#34;, &#34;shoji.View&#34;]) -&gt; &#34;Filter&#34;:
                return self._combine(&#34;^&#34;, other, self)

        def __invert__(self) -&gt; &#34;Filter&#34;:
                return shoji.CompoundFilter(&#34;~&#34;, self, None)

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                pass

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                pass</code></pre>
</details>
<h3>Subclasses</h3>
<ul class="hlist">
<li><a title="shoji.filter.CompoundFilter" href="#shoji.filter.CompoundFilter">CompoundFilter</a></li>
<li><a title="shoji.filter.ConstFilter" href="#shoji.filter.ConstFilter">ConstFilter</a></li>
<li><a title="shoji.filter.DimensionBoolFilter" href="#shoji.filter.DimensionBoolFilter">DimensionBoolFilter</a></li>
<li><a title="shoji.filter.DimensionIndicesFilter" href="#shoji.filter.DimensionIndicesFilter">DimensionIndicesFilter</a></li>
<li><a title="shoji.filter.DimensionSliceFilter" href="#shoji.filter.DimensionSliceFilter">DimensionSliceFilter</a></li>
<li><a title="shoji.filter.TensorBoolFilter" href="#shoji.filter.TensorBoolFilter">TensorBoolFilter</a></li>
<li><a title="shoji.filter.TensorFilter" href="#shoji.filter.TensorFilter">TensorFilter</a></li>
<li><a title="shoji.filter.TensorIndicesFilter" href="#shoji.filter.TensorIndicesFilter">TensorIndicesFilter</a></li>
<li><a title="shoji.filter.TensorSliceFilter" href="#shoji.filter.TensorSliceFilter">TensorSliceFilter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.Filter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        pass</code></pre>
</details>
</dd>
<dt id="shoji.filter.Filter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        pass</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.TensorBoolFilter"><code class="flex name class">
<span>class <span class="ident">TensorBoolFilter</span></span>
<span>(</span><span>tensor: <a title="shoji.tensor.Tensor" href="tensor.html#shoji.tensor.Tensor">Tensor</a>, selected: numpy.ndarray, axis: int)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TensorBoolFilter(Filter):
        def __init__(self, tensor: shoji.Tensor, selected: np.ndarray, axis: int) -&gt; None:
                self.axis = axis
                self.dim = tensor.dims[axis] if tensor.rank &gt; 0 else None
                self.tensor = tensor
                self.selected = selected

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                raise NotImplementedError()

        def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
                if n_rows is None:
                        n_rows = self.tensor.shape[self.axis]

                if self.selected.shape[0] != n_rows:
                        raise IndexError(f&#34;Boolean array used for fancy indexing along axis {self.axis} of &#39;{self.tensor.name}&#39; has {self.selected.shape[0]} elements but tensor length is {n_rows}&#34;)
                return np.where(self.selected)[0]

        def __repr__(self) -&gt; str:
                return f&#34;({self.tensor.name}[{self.selected}])&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.TensorBoolFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        raise NotImplementedError()</code></pre>
</details>
</dd>
<dt id="shoji.filter.TensorBoolFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>, n_rows: int = None) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
        if n_rows is None:
                n_rows = self.tensor.shape[self.axis]

        if self.selected.shape[0] != n_rows:
                raise IndexError(f&#34;Boolean array used for fancy indexing along axis {self.axis} of &#39;{self.tensor.name}&#39; has {self.selected.shape[0]} elements but tensor length is {n_rows}&#34;)
        return np.where(self.selected)[0]</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.TensorFilter"><code class="flex name class">
<span>class <span class="ident">TensorFilter</span></span>
<span>(</span><span>operator: str, left_operand: <a title="shoji.tensor.Tensor" href="tensor.html#shoji.tensor.Tensor">Tensor</a>, right_operand: <a title="shoji.tensor.Tensor" href="tensor.html#shoji.tensor.Tensor">Tensor</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>Filter that compares two tensors</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TensorFilter(Filter):
        &#34;&#34;&#34;Filter that compares two tensors&#34;&#34;&#34;
        def __init__(self, operator: str, left_operand: shoji.Tensor, right_operand: shoji.Tensor) -&gt; None:
                self.operator = operator
                if operator not in (&#34;&gt;&#34;, &#34;&lt;&#34;, &#34;&gt;=&#34;, &#34;&lt;=&#34;, &#34;==&#34;, &#34;!=&#34;):
                        raise SyntaxError(f&#34;Invalid operator {operator}&#34;)
                self.left_operand = left_operand
                if left_operand.rank != 1:
                        raise SyntaxError(f&#34;Only rank-1 tensors can be used in filters&#34;)
                self.right_operand = right_operand
                if right_operand.rank != 1:
                        raise SyntaxError(f&#34;Only rank-1 tensors can be used in filters&#34;)
                if isinstance(left_operand.dims[0], str):
                        self.dim = left_operand.dims[0]
                        if isinstance(right_operand.dims[0], str) and left_operand.dims[0] != right_operand.dims[0]:
                                raise SyntaxError(&#34;All tensors in an expression must have same first dimensions&#34;)
                elif isinstance(right_operand.dims[0], str):
                        self.dim = right_operand.dims[0]
                else:
                        self.dim = None
                if left_operand.shape[0] != right_operand.shape[0]:
                        raise SyntaxError(f&#34;Tensor first dimensions mismatch&#34;)

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                return np.arange(self.left_operand.shape[0])  # TODO: maybe read this from db instead, to avoid stale state

        def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                if self.operator == &#34;&gt;&#34;:
                        # Do the range lookups on the tensor indexes
                        raise NotImplementedError(&#34;Tensor-tensor comparisons not yet supported&#34;)
                # etc

        def __repr__(self) -&gt; str:
                return f&#34;({self.left_operand} {self.operator} {self.right_operand})&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.TensorFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        return np.arange(self.left_operand.shape[0])  # TODO: maybe read this from db instead, to avoid stale state</code></pre>
</details>
</dd>
<dt id="shoji.filter.TensorFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        if self.operator == &#34;&gt;&#34;:
                # Do the range lookups on the tensor indexes
                raise NotImplementedError(&#34;Tensor-tensor comparisons not yet supported&#34;)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.TensorIndicesFilter"><code class="flex name class">
<span>class <span class="ident">TensorIndicesFilter</span></span>
<span>(</span><span>tensor: <a title="shoji.tensor.Tensor" href="tensor.html#shoji.tensor.Tensor">Tensor</a>, indices: numpy.ndarray, axis: int)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TensorIndicesFilter(Filter):
        def __init__(self, tensor: shoji.Tensor, indices: np.ndarray, axis: int) -&gt; None:
                self.axis = axis
                self.dim = tensor.dims[axis] if tensor.rank &gt; 0 else None
                self.tensor = tensor
                self.indices = indices

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                raise NotImplementedError()

        def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
                if n_rows is None:
                        n_rows = self.tensor.shape[self.axis]
                self.indices[self.indices &lt; 0] = self.indices[self.indices &lt; 0] + self.tensor.shape[self.axis]
                if not np.all(self.indices &lt; n_rows):
                        raise IndexError(&#34;Index out of range&#34;)
                return self.indices[self.indices &lt; n_rows]

        def __repr__(self) -&gt; str:
                return f&#34;({self.tensor.name}[{self.indices}])&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.TensorIndicesFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        raise NotImplementedError()</code></pre>
</details>
</dd>
<dt id="shoji.filter.TensorIndicesFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>, n_rows: int = None) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
        if n_rows is None:
                n_rows = self.tensor.shape[self.axis]
        self.indices[self.indices &lt; 0] = self.indices[self.indices &lt; 0] + self.tensor.shape[self.axis]
        if not np.all(self.indices &lt; n_rows):
                raise IndexError(&#34;Index out of range&#34;)
        return self.indices[self.indices &lt; n_rows]</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="shoji.filter.TensorSliceFilter"><code class="flex name class">
<span>class <span class="ident">TensorSliceFilter</span></span>
<span>(</span><span>tensor: <a title="shoji.tensor.Tensor" href="tensor.html#shoji.tensor.Tensor">Tensor</a>, slice_: slice, axis: int)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class TensorSliceFilter(Filter):
        def __init__(self, tensor: shoji.Tensor, slice_: slice, axis: int) -&gt; None:
                self.dim = tensor.dims[axis] if tensor.rank &gt; 0 else None
                self.tensor = tensor
                self.slice_ = slice_
                self.axis = axis

        def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
                raise NotImplementedError()

        def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
                if n_rows is None:
                        n_rows = self.tensor.shape[self.axis]
                s = self.slice_.indices(n_rows)
                return np.arange(s[0], s[1], s[2])

        def __repr__(self) -&gt; str:
                s = self.slice_.indices(self.tensor.shape[self.axis])
                return f&#34;({self.tensor.name}[{s[0]}:{s[1]}:{s[2]}])&#34;</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="shoji.filter.TensorSliceFilter.get_all_rows"><code class="name flex">
<span>def <span class="ident">get_all_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_all_rows(self, wsm: shoji.WorkspaceManager) -&gt; np.ndarray:
        raise NotImplementedError()</code></pre>
</details>
</dd>
<dt id="shoji.filter.TensorSliceFilter.get_rows"><code class="name flex">
<span>def <span class="ident">get_rows</span></span>(<span>self, wsm: <a title="shoji.workspace.WorkspaceManager" href="workspace.html#shoji.workspace.WorkspaceManager">WorkspaceManager</a>, n_rows: int = None) ‑> numpy.ndarray</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def get_rows(self, wsm: shoji.WorkspaceManager, n_rows: int = None) -&gt; np.ndarray:
        if n_rows is None:
                n_rows = self.tensor.shape[self.axis]
        s = self.slice_.indices(n_rows)
        return np.arange(s[0], s[1], s[2])</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul>
<li><a href="#using-filters">Using filters</a><ul>
<li><a href="#applying-filters-to-tensors">Applying filters to tensors</a></li>
<li><a href="#writing-through-a-filter-view">Writing through a filter (view)</a></li>
<li><a href="#applying-filters-to-dimensions">Applying filters to dimensions</a></li>
<li><a href="#applying-filters-to-workspaces">Applying filters to workspaces</a></li>
</ul>
</li>
<li><a href="#kinds-of-filters">Kinds of filters</a><ul>
<li><a href="#comparisons">Comparisons</a></li>
<li><a href="#slices">Slices</a></li>
<li><a href="#index-arrays">Index arrays</a></li>
<li><a href="#boolean-arrays">Boolean arrays</a></li>
<li><a href="#compound-filters">Compound filters</a></li>
</ul>
</li>
</ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="shoji" href="index.html">shoji</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="shoji.filter.CompoundFilter" href="#shoji.filter.CompoundFilter">CompoundFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.CompoundFilter.get_all_rows" href="#shoji.filter.CompoundFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.CompoundFilter.get_rows" href="#shoji.filter.CompoundFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.ConstFilter" href="#shoji.filter.ConstFilter">ConstFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.ConstFilter.get_all_rows" href="#shoji.filter.ConstFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.ConstFilter.get_rows" href="#shoji.filter.ConstFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.DimensionBoolFilter" href="#shoji.filter.DimensionBoolFilter">DimensionBoolFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.DimensionBoolFilter.get_all_rows" href="#shoji.filter.DimensionBoolFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.DimensionBoolFilter.get_rows" href="#shoji.filter.DimensionBoolFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.DimensionIndicesFilter" href="#shoji.filter.DimensionIndicesFilter">DimensionIndicesFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.DimensionIndicesFilter.get_all_rows" href="#shoji.filter.DimensionIndicesFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.DimensionIndicesFilter.get_rows" href="#shoji.filter.DimensionIndicesFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.DimensionSliceFilter" href="#shoji.filter.DimensionSliceFilter">DimensionSliceFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.DimensionSliceFilter.get_all_rows" href="#shoji.filter.DimensionSliceFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.DimensionSliceFilter.get_rows" href="#shoji.filter.DimensionSliceFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.Filter" href="#shoji.filter.Filter">Filter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.Filter.get_all_rows" href="#shoji.filter.Filter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.Filter.get_rows" href="#shoji.filter.Filter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.TensorBoolFilter" href="#shoji.filter.TensorBoolFilter">TensorBoolFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.TensorBoolFilter.get_all_rows" href="#shoji.filter.TensorBoolFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.TensorBoolFilter.get_rows" href="#shoji.filter.TensorBoolFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.TensorFilter" href="#shoji.filter.TensorFilter">TensorFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.TensorFilter.get_all_rows" href="#shoji.filter.TensorFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.TensorFilter.get_rows" href="#shoji.filter.TensorFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.TensorIndicesFilter" href="#shoji.filter.TensorIndicesFilter">TensorIndicesFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.TensorIndicesFilter.get_all_rows" href="#shoji.filter.TensorIndicesFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.TensorIndicesFilter.get_rows" href="#shoji.filter.TensorIndicesFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="shoji.filter.TensorSliceFilter" href="#shoji.filter.TensorSliceFilter">TensorSliceFilter</a></code></h4>
<ul class="">
<li><code><a title="shoji.filter.TensorSliceFilter.get_all_rows" href="#shoji.filter.TensorSliceFilter.get_all_rows">get_all_rows</a></code></li>
<li><code><a title="shoji.filter.TensorSliceFilter.get_rows" href="#shoji.filter.TensorSliceFilter.get_rows">get_rows</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.8.4</a>.</p>
</footer>
</body>
</html>